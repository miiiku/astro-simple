---
const { width = "48px", height = "48px" } = Astro.props;
---
<svg id="menu-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width={width} height={height} viewBox="0 0 24 24">
  <line id="menu-line-1" x1="2" x2="22" y1="6" y2="6" stroke-dasharray="20,20" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" stroke="currentColor" stroke-width="2"></line>
  <line id="menu-line-2" x1="2" x2="22" y1="12" y2="12" stroke-dasharray="20,20" stroke-dashoffset="-6" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" stroke="currentColor" stroke-width="2"></line>
  <line id="menu-line-3" x1="2" x2="22" y1="18" y2="18" stroke-dasharray="20,20" stroke-dashoffset="-12" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" stroke="currentColor" stroke-width="2"></line>
</svg>

<script>
  import gsap from "gsap";

  document.querySelector("#menu-svg")?.addEventListener("click", function () {
    this.classList.toggle("open");
    if(this.classList.contains("open")) {
      runAnimation();
    } else {
      runReverse();
    }
  });

  let tween1:any = null;
  let tween2:any = null;
  let tween3:any = null;

  function runReverse() {
    tween1.reverse();
    tween2.reverse();
    tween3.reverse();
  }

  function runAnimation() {
    tween1 = gsap.to("#menu-line-1", {
      rotation: -45,
      y: 6,
      duration: 0.5,
      transformOrigin: "50% 50%",
      ease: "back.in(2)",
    });

    tween2 = gsap.to("#menu-line-2", {
      attr: { "stroke-dashoffset": -20 },
      duration: 0.5,
      ease: "back.in(2)",
    });

    tween3 = gsap.to("#menu-line-3", {
      attr: { "stroke-dashoffset": 0 },
      rotation: 45,
      y: -6,
      duration: 0.5,
      transformOrigin: "50% 50%",
      ease: "back.in(2)",
    });
  }

</script>