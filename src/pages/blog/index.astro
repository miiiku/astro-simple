---
import { getCollection } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import Datetime from "@/components/Datetime.astro";
import CalendarIcon from "@components/icons/calendar.astro";

const blogs = (await getCollection("blog")).sort((a, b) => {
  return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
});
---


<BaseLayout title="Blogs">
  <h1 class="font-bold text-3xl theme-text-stress">Blog</h1>
  <p class="mt-4 mb-6 theme-text-minor">共有{blogs.length}篇文章</p>
  <ul>
    {blogs.map((post) => {
      return (
        <li class="py-2 mb-5 last:mb-0">
          <article>
            <a class="inline-block font-bold text-xl break-all theme-text-stress hover:theme-text-hover hover:underline decoration-dashed decoration-2 underline-offset-4" href={`/blog/${post.slug}`}>{post.data.title}</a>
            <div class="flex gap-2 items-center theme-text-minor text-sm my-2">
              <div class="w-5 h-5"><CalendarIcon width="100%" height="100%" /></div>
              <Datetime datetime={post.data.publishDate} />
            </div>
            { post.data.description && <div class="theme-text-normal">{post.data.description}</div> }
          </article>
        </li>
      )
    })}
  </ul>
</BaseLayout>